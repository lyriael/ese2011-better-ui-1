#{extends 'main.html' /}

<H1> ${user.name}'s ${calendar.name}, upcoming Events</H1>

#{if msg}
<H1>
	<error>${msg}</error>
</H1>
#{/if}

<div id=DateBox>
<ol class="calendar" start="6">

        <li id="lastmonth">
                <ol start="29">
                        <li>29</li>
                        <li>30</li>
                </ol>
        </li>

        <li id="thismonth">
                <ol>
                        <li>1</li>
                        <li>2</li>
                        <li>3</li>
                        <li>4</li>
                        <li>5</li>
                        <li>6</li>
                        <li>7</li>
                        <li>8</li>
                        <li>9</li>
                        <li>10</li>
                        <li>11</li>
                        <li>12</li>
                        <li>13</li>
                        <li>14</li>
                        <li>15</li>
                        <li>16</li>
                        <li>17</li>
                        <li>18</li>
                        <li>19</li>
                        <li>20</li>
                        <li>21</li>
                        <li>22</li>
                        <li>23</li>
                        <li>24</li>
                        <li>25</li>
                        <li>26</li>
                        <li>27</li>
                        <li>28</li>
                        <li>29</li>
                        <li>30</li>
                        <li>31</li>
                </ol>
        </li>

        <li id="nextmonth">
                <ol>
                        <li>1</li>
                        <li>2</li>
                </ol>
        </li>

</ol>

</div>
<div id=CalendarBox>
#{list items:events, as:'event'}
	<p>
		${event.name} from ${event.startTime.toString()} to ${event.endTime.toString()}
	</p>
#{/list}
</div>
<p>
#{if user==myself}
<div id=CalendarBox>
#{form @Application.addEvent()}
    <p>
        <label for="eventStart">Start date: </label>
        <input type="text" name="eventStart" id="eventStart" />
    </p>
        <p>
        <label for="eventEnd">End date: </label>
        <input type="text" name="eventEnd" id="eventEnd" />
    </p>
    <p>
        <a href=@{Application.AvailableFormats()}> View available date formats </a>
    </p>
    
    <p>
        <label for="eventName">Description of new event: </label>
    </p>
    <p>
        <textarea name="eventName" id="eventName"></textarea>
    </p>
    	<input type="hidden" name="userName" id="userName" value="${user.name}" />
    	<input type="hidden" name="calendarName" id="calendarName" value="${calendar.name}" />
   	<p>
		<input type="checkbox" name="isPrivate" checked="checked"/>
		<label for="isPrivate">Make event private</label>
	</p>
    <p>
        <input type="submit" value="Add event to calendar" />
    </p>
#{/form}
</div>
#{/if}
</p>
